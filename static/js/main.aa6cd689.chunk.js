(this["webpackJsonpaydin-elektro"]=this["webpackJsonpaydin-elektro"]||[]).push([[0],{183:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},208:function(e,t,a){e.exports=a(279)},213:function(e,t,a){},214:function(e,t,a){},236:function(e,t,a){},279:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(13),l=a.n(o),u=(a(213),a(7)),i=(a(214),a(215),a(45)),s=a(24),m=a(73),p="http://localhost:4741",d="https://dotdot-api.herokuapp.com",h=n="localhost"===window.location.hostname?p:d,b=a(136),f=a.n(b),E=a(18),g=function(e){var t=Object(r.useState)(""),a=Object(u.a)(t,2),o=a[0],l=a[1],i=Object(r.useState)(""),s=Object(u.a)(i,2),p=s[0],d=s[1],h=Object(r.useState)(""),b=Object(u.a)(h,2),f=b[0],g=b[1],v=Object(r.useState)(""),O=Object(u.a)(v,2),j=O[0],y=O[1],S=Object(r.useState)(""),C=Object(u.a)(S,2),k=C[0],w=C[1];return c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("form",{className:"auth-form",onSubmit:function(t){t.preventDefault(),function(e){return fetch("".concat(n,"/sign-up/"),{method:"Post",headers:{Accept:"application/json","Content-Type":"application/json","Accept-Language":"ru,en;q=0.9"},body:JSON.stringify({credentials:{email:"".concat(e.email),phone:"".concat(e.phone),name:"".concat(e.name),fullName:"".concat(e.fullName),dob:"".concat(e.dob)}})})}({email:o,phone:p,name:f,fullName:j,dob:k}).then((function(t){if(!t.ok)throw console.log("hata, ",t),e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Something went wrong!",variant:"success"}])),new Error})).then((function(e){return console.log(o,e)})).then((function(){return e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Sign up for ".concat(f," Successful"),variant:"success"}]))})).then((function(){return console.log("pro")})).catch((function(t){console.error("ERR",t),e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"Something went wrong!",variant:"success"}]))}))}},c.a.createElement("h3",null,"Sign Up"),c.a.createElement("label",{htmlFor:"email"},"Email"),c.a.createElement("input",{required:!0,name:"email",value:o,type:"email",maxLength:32,placeholder:"Email",onChange:function(e){return l(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Phone Number"),c.a.createElement("input",{required:!0,name:"number",value:p,type:"text",maxLength:10,placeholder:"8572010203",onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&d(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Full Name"),c.a.createElement("input",{required:!0,name:"text",value:j,maxLength:32,type:"text",placeholder:"Full Name",onChange:function(e){return y(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Nick Name"),c.a.createElement("input",{required:!0,name:"text",value:f,maxLength:32,type:"text",placeholder:"Nick",onChange:function(e){return g(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Date of Birth"),c.a.createElement("input",{required:!0,name:"dob",value:k,maxLength:32,type:"date",placeholder:"12/31/1990",onChange:function(e){return w(e.target.value)}}),c.a.createElement(E.a,{variant:"primary",type:"submit"},"Register")))},v=a(31),O=function(e){var t=Object(r.useState)("st@st.com"),a=Object(u.a)(t,2),o=a[0],l=(a[1],Object(r.useState)("8572065397")),i=Object(u.a)(l,2),m=i[0],p=i[1],d=Object(r.useState)(),h=Object(u.a)(d,2),b=h[0],g=(h[1],Object(r.useState)()),O=Object(u.a)(g,2),j=O[0],y=(O[1],Object(r.useState)()),S=Object(u.a)(y,2),C=S[0],k=(S[1],Object(r.useState)(!1)),w=Object(u.a)(k,2),x=w[0],_=w[1],N=Object(r.useState)("4344"),D=Object(u.a)(N,2),T=D[0],F=D[1],P=Object(r.useState)(!1),A=Object(u.a)(P,2),I=A[0],B=A[1],q=Object(s.g)(),H={email:o,phone:m,name:b,fullName:j,dob:C};return I?c.a.createElement("div",null,"loading"):c.a.createElement("div",{className:"col-md-6 m-auto py-3"},x?c.a.createElement("form",{className:"auth-form",onSubmit:function(t){t.preventDefault(),B(!0),console.log("Signing In Confirm"),function(e,t){return f()({url:n+"/sign-in-confirm",method:"POST",data:{credentials:{phone:"".concat(e.phone),confirmation:"".concat(t)}}})}(H,T).then((function(t){console.log("SignInConfirm",t.data.user),e.setUser(t.data.user)})).then((function(){v.b.success("Welcome"),B(!1)})).then((function(){q.push("/dispatch")})).catch((function(e){console.error("ErrorInSubmit",e),v.b.error("Please re-enter the confirmation code")}))}},c.a.createElement("h3",null,"Enter the confirmation code"),c.a.createElement("label",{htmlFor:"email"},"4 digit code"),c.a.createElement("input",{required:!0,name:"phone",value:T,type:"text",placeholder:"",onChange:function(e){return F(e.target.value)}}),c.a.createElement(E.a,{variant:"primary",type:"submit"},"Sign In")):c.a.createElement("form",{className:"auth-form",onSubmit:function(t){t.preventDefault(),B(!0),console.log("SIgning"),_(!0),function(e){return f()({url:n+"/sign-in",method:"POST",data:{credentials:{email:e.email,phone:"".concat(e.phone),name:"".concat(e.name),fullName:"".concat(e.fullName),dob:"".concat(e.dob)}}})}(H).then((function(t){console.log("signIn",t.data.user),e.setUser(t.data.user)})).then((function(){v.b.info("Please enter your four-digit code"),B(!1)})).catch((function(e){v.b.error("Something went wrong. Please try again"),B(!1),_(!1)}))}},c.a.createElement("h3",null,"Sign In"),c.a.createElement("label",{htmlFor:"email"},"Phone"),c.a.createElement("input",{required:!0,name:"phone",value:m,type:"text",placeholder:"8572012020",onChange:function(e){return p(e.target.value)}}),c.a.createElement("label",{htmlFor:"email"},"Have your phone ready!"),c.a.createElement(E.a,{variant:"primary",type:"submit"},"Sign In")))},j=(a(236),a(183)),y=a.n(j),S=c.a.createElement(c.a.Fragment,null,c.a.createElement(i.b,{to:"/dispatch"},"Dispatch"),c.a.createElement(i.b,{to:"/new-order"},"New Order"),c.a.createElement(i.b,{to:"/new-restaurant"},"Add New Restaurant"),c.a.createElement(i.b,{to:"/sign-out"},"Sign Out")),C=c.a.createElement(c.a.Fragment,null,c.a.createElement(i.b,{to:"/sign-up"},"Sign Up"),c.a.createElement(i.b,{to:"/sign-in"},"Sign In")),k=c.a.createElement(c.a.Fragment,null,c.a.createElement(i.b,{to:"/"},"Home")),w=function(e){var t=e.user;return c.a.createElement("header",{className:"main-header"},c.a.createElement("img",{src:y.a,className:"App-logo",alt:"logo"}),c.a.createElement("h2",null,"Foodie Fliers"),c.a.createElement("nav",null,t&&t.token&&c.a.createElement("span",null,"Welcome, ",t.name),t&&t.token?S:C,k))},x=a(195),_=function(e){var t=e.user,a=e.component,n=e.render,r=Object(x.a)(e,["user","component","render"]);return t&&n?c.a.createElement(s.b,Object.assign({},r,{render:n})):c.a.createElement(s.b,Object.assign({},r,{render:function(e){return t?c.a.createElement(a,e):c.a.createElement(s.a,{to:"/"})}}))},N=a(184),D=a(185),T=a(194),F=a(193),P=a(147),A=function(e){Object(T.a)(a,e);var t=Object(F.a)(a);function a(e){var n;return Object(N.a)(this,a),(n=t.call(this,e)).timer=void 0,n.handleClose=function(){return n.setState({show:!1})},n.state={show:!0},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.timer=setInterval((function(){e.setState({show:!1})}),4e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this.props.alert;return c.a.createElement(P.a,{dismissible:!0,show:this.state.show,variant:e.variant,onClose:this.handleClose},c.a.createElement("div",{className:"container"},c.a.createElement(P.a.Heading,null,e.title)))}}]),a}(c.a.Component),I=a(46),B=a(16),q=a.n(B),H=a(29),U=function(){var e=Object(H.a)(q.a.mark((function e(t,a){var r,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(n,"/restaurants/"),{method:"Get",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"}});case 2:if(200!==(r=e.sent).status){e.next=10;break}return e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),R=function(){var e=Object(H.a)(q.a.mark((function e(t,a){var r,c,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.token,e.next=3,fetch("".concat(n,"/orders/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify(Object(I.a)({},t))});case 3:if(201!==(c=e.sent).status){e.next=11;break}return e.next=7,c.json();case 7:return o=e.sent,e.abrupt("return",Object(I.a)(Object(I.a)({},o),{},{status:201}));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),z=a(30),W=a(192),L=function(e){var t=Object(r.useState)(null),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),i=Object(u.a)(l,2),s=i[0],m=i[1],p=function(){e.onHide()};return Object(r.useEffect)((function(){U(e.user,n).then((function(e){console.log("Rsp Restaurants",e);var t=[];e.restaurants.forEach((function(e){return t.push(Object(I.a)({value:e.restaurantName,label:"".concat(e.restaurantName," - ").concat(e.address)},e))})),console.log("restaurantsWithLabel",t),m(t)}))}),[e,n]),c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{show:e.show,onHide:p},c.a.createElement(z.a.Header,{closeButton:!0},c.a.createElement(z.a.Title,null,"Select a Restaurant, or Add a New One")),c.a.createElement(z.a.Body,null,"Please add restaurant from the previos screen and select it here"),c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement(W.a,{value:n,name:n,onChange:o,options:s})),c.a.createElement(z.a.Footer,null,c.a.createElement(E.a,{variant:"secondary",onClick:p},"Close"),c.a.createElement(E.a,{variant:"primary",onClick:function(){console.log("restaurant input",n),e.onHide(),e.setRestaurant(n)}},"Save Changes"))))},J=function(){var e=Object(H.a)(q.a.mark((function e(t,a){var r,c,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.token,e.next=3,fetch("".concat(n,"/customers/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify({name:t.name,companyName:t.companyName,address:t.address,addressDetails:t.email,phone:t.phone,phoneExtension:t.phoneExtension,description:t.description,previousTip:t.previousTip,adminDescription:t.adminDescription})});case 3:if(201!==(c=e.sent).status){e.next=11;break}return e.next=7,c.json();case 7:return o=e.sent,e.abrupt("return",Object(I.a)(Object(I.a)({},o),{},{status:201}));case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),G=a(187),M=a.n(G),K=function(e){var t=Object(r.useState)(),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(),i=Object(u.a)(l,2),s=i[0],m=i[1],p=Object(r.useState)(),d=Object(u.a)(p,2),h=d[0],b=d[1],f=Object(r.useState)(),g=Object(u.a)(f,2),O=g[0],j=g[1],y=Object(r.useState)(),S=Object(u.a)(y,2),C=S[0],k=S[1],w=Object(r.useState)(),x=Object(u.a)(w,2),_=x[0],N=x[1],D=Object(r.useState)(),T=Object(u.a)(D,2),F=T[0],P=T[1],A=Object(r.useState)(),I=Object(u.a)(A,2),B=I[0],q=I[1],H=Object(r.useState)(),U=Object(u.a)(H,2),R=U[0],W=U[1],L=Object(r.useState)(),G=Object(u.a)(L,2),K=G[0],Y=G[1],$=Object(r.useState)(!1),Z=Object(u.a)($,2),Q=Z[0],V=Z[1],X=function(){e.onHide()};return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{show:Q,centered:!0,animation:!1,backdrop:"static",size:"sm"},c.a.createElement("div",{style:{alignSelf:"center",backgroundColor:"",position:"absolute"}},c.a.createElement(M.a,{type:"TailSpin",color:"#000",height:80,width:80}),c.a.createElement("p",{style:{color:"white",marginTop:16}},"Loading Please Wait"))),c.a.createElement(z.a,{show:e.show,onHide:X},c.a.createElement(z.a.Header,{closeButton:!0},c.a.createElement(z.a.Title,null,"Customer")),c.a.createElement(z.a.Body,null,"Enter Customer Details"),c.a.createElement("form",{id:"new-customer-form",onSubmit:function(t){t.preventDefault(),V(!0),J({name:n,companyName:s,address:h,addressDetails:O,email:C,phone:_,phoneExtension:F,description:B,previousTip:R,adminDescription:K},e.user).then((function(e){if(201!==e.status)throw Error;return v.b.success("Customer Created!"),e})).then((function(t){console.log("Customer has been set ",t.customer),e.setCustomer(t.customer)})).catch((function(e){v.b.error("Something went wrong. Please try again code:",e.status)})),V(!1),e.onHide()}},c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("label",{htmlFor:"number"},"Customer Name"),c.a.createElement("input",{required:!0,name:"customerName",value:n,type:"text",placeholder:"Shake Shack",onChange:function(e){o(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Company Name"),c.a.createElement("input",{required:!0,name:"companyName",value:s,type:"text",placeholder:"Wayfair-BackBay",onChange:function(e){m(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Address"),c.a.createElement("input",{required:!0,name:"credit",value:h,type:"text",placeholder:"4 Copley Place",onChange:function(e){b(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Address Details"),c.a.createElement("input",{name:"credit",value:O,type:"text",placeholder:"Suite 2020",onChange:function(e){j(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Customer Email"),c.a.createElement("input",{name:"credit",value:C,type:"text",placeholder:"jennifer@wayfair.com",onChange:function(e){k(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Phone #"),c.a.createElement("input",{required:!0,name:"credit",value:_,type:"text",placeholder:"6172002020",onChange:function(e){N(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Phone # extension"),c.a.createElement("input",{name:"credit",value:F,type:"text",placeholder:"talk directly to front desk",onChange:function(e){P(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Description"),c.a.createElement("input",{name:"credit",value:B,type:"text",placeholder:"hard to find the office",onChange:function(e){q(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Previous Tips"),c.a.createElement("input",{name:"credit",value:R,type:"text",placeholder:"Generous tips",onChange:function(e){W(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Admin Notes"),c.a.createElement("input",{name:"credit",value:K,type:"text",placeholder:"hidden from drivers",onChange:function(e){Y(e.target.value)}}))),c.a.createElement(z.a.Footer,null,c.a.createElement(E.a,{variant:"secondary",onClick:X},"Close"),c.a.createElement(E.a,{form:"new-customer-form",type:"submit",variant:"primary"},"Save Changes"))))},Y=a(119),$=a(72),Z=a(152),Q=a(25),V=a(311),X=a(320),ee=function(e){var t=Object(r.useState)(),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(),i=Object(u.a)(l,2),s=i[0],m=i[1],p=Object(r.useState)(),d=Object(u.a)(p,2),h=d[0],b=d[1],f=Object(r.useState)(),g=Object(u.a)(f,2),v=g[0],O=g[1],j=function(){e.onHide()};return c.a.createElement(c.a.Fragment,null,c.a.createElement(z.a,{show:e.show,onHide:j},c.a.createElement(z.a.Header,{closeButton:!0},c.a.createElement(z.a.Title,null,"Customer")),c.a.createElement(z.a.Body,null,"Enter Customer Details"),c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("label",{htmlFor:"number"},"Order Total"),c.a.createElement("input",{required:!0,name:"tipTotal",value:s,type:"number",placeholder:"650",onChange:function(e){return m(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Tip Total"),c.a.createElement("input",{required:!0,name:"tipTotal",value:v,type:"number",placeholder:"70",onChange:function(e){return O(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Description"),c.a.createElement("input",{name:"description",value:n,type:"text",placeholder:"heavy order, pastas",onChange:function(e){o(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Admin Description"),c.a.createElement("input",{name:"adminOrderDescription",value:h,type:"text",placeholder:"send the best driver here, needs to be rushed",onChange:function(e){b(e.target.value)}})),c.a.createElement(z.a.Footer,null,c.a.createElement(E.a,{variant:"secondary",onClick:j},"Close"),c.a.createElement(E.a,{variant:"primary",onClick:function(){e.onHide(),e.setOrderDetails({orderTotal:s,tipTotal:v,description:n,adminOrderDescription:h})}},"Save Changes"))))},te=function(e){var t=Object(r.useState)(),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(!1),i=Object(u.a)(l,2),s=i[0],m=i[1],p=Object(r.useState)(),d=Object(u.a)(p,2),h=d[0],b=d[1],f=Object(r.useState)(!1),g=Object(u.a)(f,2),O=g[0],j=g[1],y=Object(r.useState)("ezCater"),S=Object(u.a)(y,2),C=S[0],k=S[1],w=Object(r.useState)(new Date(Date.now()+864e5)),x=Object(u.a)(w,2),_=x[0],N=x[1],D=Object(r.useState)(new Date(Date.now()+864e5)),T=Object(u.a)(D,2),F=T[0],P=T[1],A=Object(r.useState)(!1),I=Object(u.a)(A,2),B=I[0],q=I[1],H=Object(r.useState)(),U=Object(u.a)(H,2),z=U[0],W=U[1],J=function(){m(!1),j(!1),q(!1)},G=function(e){N(e)};return c.a.createElement(c.a.Fragment,null,c.a.createElement(L,{show:s,onHide:J,user:e.user,setRestaurant:function(e){return o(e)}}),c.a.createElement(K,{show:O,onHide:J,customer:h,setCustomer:function(e){return b(e)},user:e.user}),c.a.createElement(ee,{show:B,onHide:J,orderDetails:z,setOrderDetails:function(e){return W(e)}}),c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("form",{className:"auth-form",onSubmit:function(){return console.log("heyo")}},c.a.createElement("h3",null,"Create an Order"),c.a.createElement(v.a,null),c.a.createElement("label",{htmlFor:"number"},"Restaurant"),c.a.createElement(E.a,{onClick:function(){return m(!0)}},n?n.value:"Select a restaurant"),c.a.createElement("label",{htmlFor:"number"},"Customer"),c.a.createElement(E.a,{onClick:function(){j(!0)}},h?h.companyName:"Enter Customer Details"),c.a.createElement("label",{htmlFor:"number"},"Source"),c.a.createElement(Y.a,{id:"dropdown-basic-button",title:C},c.a.createElement($.a.Item,{onClick:function(){console.log("customer>>",h),v.b.success("Customer Creating!"),console.log("orderDetails>",z),k("ezCater")}},"eZCater"),c.a.createElement($.a.Item,{onClick:function(){return k("Other")}},"Other")),c.a.createElement(Q.a,{utils:Z.a},c.a.createElement(V.a,{margin:"normal",id:"Promised Pick-Up Date",label:"Order Date",format:"MM/dd/yyyy",value:_,onChange:G,KeyboardButtonProps:{"aria-label":"change date"}}),c.a.createElement(X.a,{margin:"normal",id:"time-picker",label:"Promised Pick-up Time",value:_,onChange:G,KeyboardButtonProps:{"aria-label":"change time"}})),c.a.createElement(Q.a,{utils:Z.a},c.a.createElement(X.a,{margin:"normal",id:"time-picker",label:"Promised Drop-off Time",value:F,onChange:function(e){P(e)},KeyboardButtonProps:{"aria-label":"change time"}})),c.a.createElement(E.a,{onClick:function(){return q(!0)}},"Order Details"),c.a.createElement(E.a,{onClick:function(){v.b.success("Creating an order.. Please Wait");var t={restaurantId:n._id,customerId:h._id,source:C,pPickUpDateTime:_,pDropOfDateTime:F,orderStatus:"Waiting Triage",orderTotal:z&&z.orderTotal?z.orderTotal:0,tipTotal:z&&z.tipTotal?z.tipTotal:0,description:z&&z.description?z.description:"",adminOrderDescription:z&&z.adminOrderDescription?z.adminOrderDescription:""};R(t,e.user).then((function(e){if(201!==e.status)throw Error;return v.b.success("Order Created!"),e})).catch((function(e){v.b.error("Something went wrong. Please try again. Error code:",e.status)}))}},"Create the Order"))))},ae=function(){var e=Object(H.a)(q.a.mark((function e(t,a){var r,c,o;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.token,e.next=3,fetch("".concat(n,"/google-maps-masker/").concat(t),{method:"GET",headers:{Authorization:"Bearer "+r}});case 3:if(200!==(c=e.sent).status){e.next=12;break}return e.next=7,c.json();case 7:return o=e.sent,console.log("responseJson",o),e.abrupt("return",o);case 12:return e.abrupt("return",!1);case 13:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=function(){var e=Object(H.a)(q.a.mark((function e(t,a,n,r,c,o,l){return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re({restaurantName:t,address:a,responsiblePerson:n,phone:r,description:c,adminDescription:o},l);case 2:case"end":return e.stop()}}),e)})));return function(t,a,n,r,c,o,l){return e.apply(this,arguments)}}(),re=function(){var e=Object(H.a)(q.a.mark((function e(t,a){var n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.token,e.next=3,fetch("".concat(h,"/restaurants/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+n},body:JSON.stringify({restaurant:{restaurantName:t.restaurantName,address:t.address,responsiblePerson:t.responsiblePerson,phone:t.phone,description:t.description,adminDescription:t.adminDescription}})});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ce=function(e){var t=Object(r.useState)(),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(),i=Object(u.a)(l,2),s=i[0],p=i[1],d=Object(r.useState)(),h=Object(u.a)(d,2),b=h[0],f=h[1],g=Object(r.useState)(),v=Object(u.a)(g,2),O=v[0],j=v[1],y=Object(r.useState)(),S=Object(u.a)(y,2),C=S[0],k=S[1],w=Object(r.useState)(),x=Object(u.a)(w,2),_=x[0],N=x[1],D=Object(r.useState)(),T=Object(u.a)(D,2),F=T[0],P=T[1];Object(r.useEffect)((function(){function t(){return(t=Object(H.a)(q.a.mark((function t(){var a,n;return q.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(s&&s.length>4)){t.next=8;break}return t.next=3,ae(s,e.user);case 3:!1===(a=t.sent)&&e.setAlerts([].concat(Object(m.a)(e.alerts),[{title:"getSuggestions failed. Please change the input and try again",variant:"danger"}])),console.log("retrieved addresses",a.response),n=a.response,P(Object(m.a)(n));case 8:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[s,e]);return c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("form",{className:"auth-form",onSubmit:function(t){null===t||void 0===t||t.preventDefault(),ne(n,s,b,O,C,_,e.user),j(""),p(""),f(""),o(""),k(""),N(""),P("")}},c.a.createElement("h3",null,"Add new restaurant"),c.a.createElement("label",{htmlFor:"text"},"Restaurant Name"),c.a.createElement("input",{name:"name",value:n,type:"text",placeholder:"Shake Shack",onChange:function(e){return o(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Phone Number"),c.a.createElement("input",{required:!0,name:"phoneNumber",value:O,type:"text",placeholder:"6172827141",maxLength:10,onChange:function(e){(""===e.target.value||/^[0-9\b]+$/.test(e.target.value))&&j(e.target.value)}}),c.a.createElement("label",{htmlFor:"text"},"Address"),c.a.createElement("input",{required:!0,name:"Address",value:s,type:"text",placeholder:"125 Summer St",onChange:function(e){return p(e.target.value)}}),c.a.createElement("label",{htmlFor:"number"},"Responsible Person"),c.a.createElement("input",{name:"responsiblePerson",value:b,type:"text",placeholder:"Nick Papadapolos",onChange:function(e){return f(e.target.value)}}),c.a.createElement("label",{htmlFor:"email"},"Description"),c.a.createElement("input",{name:"description",value:C,type:"text",placeholder:"Hard to find Parking",onChange:function(e){return k(e.target.value)}}),c.a.createElement("label",{htmlFor:"email"},"Admin Description"),c.a.createElement("input",{name:"adminDescription",value:_,type:"text",placeholder:"Always having problems, low tips- Will Not be shared with Drivers",onChange:function(e){return N(e.target.value)}}),F&&F.length>0&&F.map((function(e,t){return c.a.createElement(E.a,{variant:"primary",key:t,type:"button",onClick:function(){p(e.description),P([])}},e.description)})),c.a.createElement(E.a,{variant:"primary",type:"submit"},"Create")))},oe=(a(257),a(258),function(){var e=Object(H.a)(q.a.mark((function e(t){var a,n;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/users/"),{method:"Get",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"}});case 2:if(200!==(a=e.sent).status){e.next=10;break}return e.next=6,a.json();case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),le=function(){var e=Object(H.a)(q.a.mark((function e(t,a){var n,r;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(h,"/orders?query=").concat(a),{method:"Get",headers:{Authorization:"Bearer "+t.token,"Content-Type":"application/json"}});case 2:if(200!==(n=e.sent).status){e.next=10;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ue=function(){var e=Object(H.a)(q.a.mark((function e(t,a,n){var r,c;return q.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.token,e.next=3,fetch("".concat(h,"/trips/"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+r},body:JSON.stringify({trip:{driver:n,order:a}})});case 3:if(201!==(c=e.sent).status){e.next=8;break}return e.abrupt("return",c);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),ie=a(148),se=a(319),me=a(149),pe=a(131);function de(){var e=Object(ie.a)(["\n  flex: 1;\n  display: inline-block;\n  width: 200px;\n  padding: 10px;\n  background-color: white;\n"]);return de=function(){return e},e}function he(){var e=Object(ie.a)(["\n  flex: 1;\n  flex-direction: column;\n  padding: 10px;\n  background-color: white;\n"]);return he=function(){return e},e}var be=me.a.div(he()),fe=me.a.div(de()),Ee=function(e){var t=Object(r.useState)(!0),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)(),i=Object(u.a)(l,2),s=(i[0],i[1],Object(r.useState)([])),m=Object(u.a)(s,2),p=(m[0],m[1],Object(r.useState)()),d=Object(u.a)(p,2),h=d[0],b=d[1],f=Object(r.useState)(),g=Object(u.a)(f,2),v=g[0],O=g[1],j=Object(r.useState)(),y=Object(u.a)(j,2),S=y[0],C=y[1],k=Object(r.useState)(),w=Object(u.a)(k,2),x=w[0],_=w[1],N=Object(r.useState)(),D=Object(u.a)(N,2),T=D[0],F=D[1],P=e.order;return Object(r.useEffect)((function(){b(e.drivers),_(Object(pe.a)(Object(se.a)(P.pPickUpDateTime,"America/New_York"),"hh:mm")),F(Object(pe.a)(Object(se.a)(P.pDropOfDateTime,"America/New_York"),"yyyy/MM/dd")),C(Object(pe.a)(Object(se.a)(P.pDropOfDateTime,"America/New_York"),"hh:mm"))}),[e.drivers,P.pPickUpDateTime,P.pDropOfDateTime]),n?c.a.createElement(be,null,c.a.createElement(fe,null,c.a.createElement("p",null,P.restaurantId.restaurantName),c.a.createElement("p",null,P.restaurantId.address),c.a.createElement("p",null,"--")),c.a.createElement(fe,null,c.a.createElement("p",null,P.customerId.companyName),c.a.createElement("p",null,P.customerId.address),c.a.createElement("p",null,P.customerId.addressDetails)),c.a.createElement(fe,null,c.a.createElement("p",null,P.tripId&&P.tripId.driver?P.tripId.driver.fullName:"No Driver"),c.a.createElement("p",null,v?v.name:P.orderStatus),c.a.createElement("p",null,v?v._id.substr(v._id.length-5):null)),c.a.createElement(fe,null,c.a.createElement("p",null,"Pick up on "+T),c.a.createElement("p",null,"Pick up at "+x)),c.a.createElement(fe,null,c.a.createElement("p",null,"Drop off at "+S)),c.a.createElement(Y.a,{id:"dropdown-basic-button",title:"Select a Driver"},h&&h.map((function(e,t){return c.a.createElement($.a.Item,{key:t,onClick:function(){O(e),console.log("driver>>",e),console.log("Order>",P)}},e.name+" - "+e._id.substr(e._id.length-5))}))),c.a.createElement(E.a,{onClick:function(){ue(e.user,e.order,v).then((function(e){console.log("Trip Created!component hidden ",e),e&&o(!1)})).catch((function(e){return console.log("err",e)}))}},"Edit"," "),c.a.createElement("p",null,"___________________________________________________________")):null},ge=function(e){var t=Object(r.useState)(),a=Object(u.a)(t,2),n=a[0],o=a[1],l=Object(r.useState)([]),i=Object(u.a)(l,2),s=i[0],m=i[1],p=Object(r.useState)([]),d=Object(u.a)(p,2),h=d[0],b=d[1];Object(r.useEffect)((function(){oe(e.user).then((function(e){console.log("getDrivers>>",e),b(e)}));le(e.user,"Waiting Triage").then((function(e){console.log("getOrders>>",e),m(e)}))}),[n,e]);var f=e.user;return c.a.createElement("div",{className:"col-md-12 m-auto py-3"},c.a.createElement("h1",null,"Dispatch Drivers"),c.a.createElement(E.a,{onClick:function(){return o(n+1)}},"Refresh"),c.a.createElement(E.a,{onClick:function(){console.log("drivers",h),console.log("orders",s)}},"Console.log"),c.a.createElement(E.a,{onClick:function(){return le(e.user,"Assigned").then((function(e){m(e)}))}},"Show Assigned Orders"),s&&s.map((function(e,t){return c.a.createElement(Ee,{key:t,user:f,order:e,drivers:h})})))},ve=function(e){var t=e.clearUser,a=e.user;return Object(r.useEffect)((function(){console.log("quiting"),function(e){return f()({url:n+"/sign-out",method:"DELETE",headers:{Authorization:"Token token=".concat(e.token)}})}(a).finally((function(){return v.b.success("Sign Out Successful")})).finally((function(){return t()}))})),c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("h1",null,"Come Back Again!"))},Oe=a(189),je=a.n(Oe),ye=(a(277),function(e){var t=Object(r.useState)(!1),a=Object(u.a)(t,2),n=a[0];a[1];return n?c.a.createElement("div",null,"loading"):c.a.createElement("div",{className:"col-md-6 m-auto py-3"},c.a.createElement("h1",null,"aqsdsad"),c.a.createElement(je.a,{action:"/api/upload",source:function(e){return e.source}}))}),Se=c.a.useState,Ce=function(){var e=Se(),t=Object(u.a)(e,2),a=t[0],n=t[1],r=Se([]),o=Object(u.a)(r,2),l=o[0],m=o[1];return c.a.createElement("div",{className:"App"},c.a.createElement("main",{className:"container"},c.a.createElement(v.a,null),c.a.createElement(i.a,null,c.a.createElement(w,{user:a}),l.length>0&&l.map((function(e,t){return c.a.createElement(A,{key:t,dismissible:!0,onClose:function(){return m([])},alert:e},c.a.createElement("p",null,e.title))})),c.a.createElement(s.d,null,a&&c.a.createElement(_,{user:a,exact:!0,path:"/",render:function(){return c.a.createElement("div",null,c.a.createElement("h1",null,"Under Construction"))}}),c.a.createElement(_,{user:a,exact:!0,path:"/dispatch",render:function(){return c.a.createElement(ge,{user:a})}}),c.a.createElement(_,{user:a,exact:!0,path:"/new-order",render:function(){return c.a.createElement(te,{alerts:l,setAlerts:m,user:a})}}),c.a.createElement(_,{user:a,exact:!0,path:"/new-restaurant",render:function(){return c.a.createElement(ce,{alerts:l,setAlerts:m,user:a})}}),c.a.createElement(_,{user:a,exact:!0,path:"/sign-out",render:function(){return c.a.createElement(ve,{user:a,clearUser:function(){return n(null)}})}}),c.a.createElement(s.b,{path:"/sign-up",render:function(){return c.a.createElement(g,{alerts:l,setAlerts:m,setUser:n})}}),c.a.createElement(s.b,{path:"/sign-in",render:function(){return c.a.createElement(O,{alerts:l,setAlerts:m,setUser:n})}}),c.a.createElement(s.b,{path:"/",render:function(){return c.a.createElement(ye,null)}})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ke=a(191),we={loggedIn:!1,session:"",userName:""};var xe=a(128),_e=Object(xe.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:we,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SESSION":return Object(I.a)(Object(I.a)({},e),t.payload);default:return e}}));l.a.render(c.a.createElement(ke.a,{store:_e},c.a.createElement(Ce,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[208,1,2]]]);
//# sourceMappingURL=main.aa6cd689.chunk.js.map